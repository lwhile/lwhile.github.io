<html>

<head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>
    金融经济 | 神蛋杂谈
</title>
<link rel="shortcut icon" href="https://lwhile.github.io/favicon.ico?v=1576341339502">
<!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous"> -->
<link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://lwhile.github.io/styles/main.css">
<!-- js -->
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<script src="https://lwhile.github.io/media/js/jquery.sticky-sidebar.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>


</head>

<body>
    <div class="main">
        <div class="header">
    <div class="nav">
        <div class="logo">
            <a href="https://lwhile.github.io">
                <img class="avatar" src="https://lwhile.github.io/images/avatar.png?v=1576341339502" alt="">
            </a>
            <div class="site-title">
                <h1>
                    神蛋杂谈
                </h1>
            </div>
        </div>
        <span class="menu-btn fa fa-align-justify"></span>
        <div class="menu-container">
            <ul>
                
                    
                            <li>
                                <a href="/" class="menu">
                                    首页
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/archives" class="menu">
                                    归档
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/tags" class="menu">
                                    标签
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/post/about" class="menu">
                                    关于
                                </a>
                            </li>
                            
                                
            </ul>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $(".menu-btn").click(function() {
            $(".menu-container").slideToggle();
        });
        $(window).resize(function() {

            if (window.matchMedia('(min-width: 960px)').matches) {
                $(".menu-container").css('display', 'block')
            } else {
                $(".menu-container").css('display', 'none')
            }

        });
    });
</script>

            <div id="main-content" class="post-container main-container">
                <div id="content" class="main-container-left">
                    
    <div class="i-card">
        <b>标签：#
        金融经济</b>
    </div>
    
        
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://lwhile.github.io/post/brown-motion">
                        使用 R 模拟金融市场的布朗运动
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2019-07-21</time>
                    
                        <a href="https://lwhile.github.io/tag/qi-quan" class="post-tag i-tag
                            i-tag-error">
            #期权
        </a>
                        
                        <a href="https://lwhile.github.io/tag/jin-rong-jing-ji" class="post-tag i-tag
                            i-tag-other_4">
            #金融经济
        </a>
                        
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            布朗运动的发现源于19 世纪的植物学家罗伯特 • 布朗，他发现在显微镜中观察花粉微粒在水中的运动是无规则的；到了 20 世纪初期，爱因斯坦才详细解释了布朗运动：花粉微粒的无规则运动是水分子撞击形成的。在金融领域，布朗运动运动背后代表的随机过程被大量运用在 BSM 期权定价公式上，这也是我写这样一篇文章的原因。
在市场中的一些人看来，市场的波动完全是随机的。这其中最出名的就是纳西姆·尼古拉斯·塔勒布，你可能没听说这个名字，但是你应该知道这几本书，《黑天鹅》，《随机致富的傻瓜》。他们都出自塔勒布之手。
标准布朗运动 { B(t): t &amp;gt; 0 } 的定义为：

B(0) = 0；
对于所有的 0 &amp;lt; s &amp;lt; t，变化量 B(sn) - B(sn-1) 之间的值是相互独立的；
对于所有的 0 &amp;lt; s &amp;lt; t，变化量 B(sn) - B(sn-1) 符合均值为 0，方差为 (t - s) 的正态分布；

同时布朗运动也是一个马尔可夫过程，意味着 t+1 时刻的取值仅和 t 时刻有关，与 t-1 以及之前任何时刻的值无关，即 t 时刻以及包含了判断接下来走势需要的所有信息。用大白话说就是，明天某只股票的价格要怎么走，只和今天市场的表现有关，和今天之前的任一一天都无关。

布朗运动模拟出来的走势图是不是和股市走势很像？
连续还是离散？
随机过程可以分为四类：

离散时间 + 离散空间
离散空间 + 连续时间
连续时间 + 离散空间
连续时间 + 连续空间

标准的布朗运动是连续时间+连续空间，但是在金融市场，即便是交易时间最长（周一至周五 24 小时在全球各个时区不停交易）的货币市场，也会存在周末两天的时间缺口。对于价格，也会有跳空情况的存在。因此现实世界的产生的数据序列肯定是时间与空间都离散，这点要和理想模型区分开。
使用 R 语言模拟布朗运动
这篇文章之所以使用 R 语言做代码载体，是因为我最近在看金融统计学的资料时发现 R 语言出现的频率不是一般得高，几乎总是和 Python 一起出现。由于我对 Python 已经比较熟悉，所以就选个不熟悉语言玩玩。
R 环境的安装很简单，Mac、Linux、Windows 都有各自的安装包，开箱即用，推荐清华的镜像源 https://mirrors.tuna.tsinghua.edu.cn/CRAN/
安装后进入 REPL ，REPL 对于这次的代码量来说足够使用了。
第一步，先准备数据序列。这里需要一堆随机数，这些随机数要满足布朗运动的定义。在 R 里面，生成满足这样要求的数据可以使用函数
rnorm(n, mean, var)
参数 n 表示要生成的随机数个数，mean 表示均值，var 表示方差。
因此生成 10 个可以代表布朗运动的代码为：
rnorm(10, 0，1)
// [1] -0.28180192  0.07735837 -1.25260216 -0.64893090  0.97454564  1.30477018  0.89177639 -0.47591015  2.02248821 -2.34884907


我们把随机数的数量加大，直接调至 1000 个，并用变量 dis 存下来：
dis = rnorm(1000, 0, 1)


接下来把这 1000 个数据可视化展示出来。对于 R 来说，不需要安装额外的第三方包，直接运行 plot 即可（这点倒是比 python 强......）
 plot(dis, type=&amp;quot;l&amp;quot;, main=&amp;quot;brownian_montion&amp;quot;, xlab=&amp;quot;time&amp;quot;, ylab=&amp;quot;price&amp;quot;)


得到的结果为：

翻车了，不是说可以用模拟股价的运行吗？哪个产品会的价格会走成这副鬼样啊！
这种现象其实也是我亲自动手去模拟之后才发现的。在这里，要让生成的数据看起来像真正的股价走势图，只需要对生成的数据最一个小小的操作即可：
dis = cumsum(dis)


这句代码使用 cumsum 函数把 dis 序列的每个元素做了累积求和的运算，下面是它的可视化结果：

很像真正的股价走势对吧？在高位快速下跌，中间经历一波小反弹，被套的人发现无力创新高后又继续抛售，说得我自己都信了，然而这真的是用随机数据生产的一幅图。
其实看到这幅图的时候我立马想起 2015 年的 A 股，我把图调出来让读者感受下中间的奇妙。

https://mp.weixin.qq.com/s/WxYqY4DWoMP6Bo2GeKE8Iw

                                        </div>
                                        
                                            <a class="btn btn-text" href="https://lwhile.github.io/post/brown-motion">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://lwhile.github.io/post/future-value-defination">
                        《Option Volatility &amp; Pricing》 学习笔记：远期价格的定价
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2019-06-15</time>
                    
                        <a href="https://lwhile.github.io/tag/jin-rong-jing-ji" class="post-tag i-tag
                            i-tag-other_1">
            #金融经济
        </a>
                        
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            远期价格，顾名思义就是将来得到某个东西时需要付出的价格，这个东西可以是某种实体商品，也可以是某种服务。文章后面的篇幅，就是探讨如果在当前节点下，如何去确定未来某个时间标的物的价格。
首先给出一个计算远期合约价格的公式：
远期合约的价格 = 现货价格 + 现金可获得的收益 - 现货可以得到的收益

以一个例子来解释上面公式的意义，假如我想从甲手中买入一块地皮，价格是 100 万。我希望跟甲签订一个远期合约，约定一年后再以某个价格从他手中买入这块地皮。接下来就要确定，一年后要以一个什么样的价格来买入这块地，对双方才是公平的（这很重要）。
如果我一年后再买入这块地，100 万在我手上的这一年是可以产生利息的，如果以年化 8% 来计算，持有 100 万现金一年可以得到的收益为 8 万。这 8 万的利息本来应该是甲的，所以一年后你要补偿给他。
同理，持有土地也是有收益的，比如租金，在上面建工厂等。假设一年的租金收入是 5 万，这 5 万本来是我的，但是却被甲拿了，所以他一年后也要补偿我。
所以一年后的价格是多少已经很明朗了，就是
现货价格（100 万）+ 现金可获得的收益（8 万）- 现货可以得到的收益（5 万） = 103 万

这个价格我们谁够不亏，谁都不赚（不考虑房产本身的增值的情况下），交易顺利完成。
金融工具可以服务于实体就是这样体现的。
接下来把目光放到交易所，毕竟上面的例子还是太简单了。
商品市场（粮食、能源、贵金属等）
商品标的有其特殊性，当我们购入商品的时候，除了现金流，还需要考虑：

合约交割的时间，像粮食这些商品是有保质期的
存储成本
保险成本

我们用下面的字母表示这些变量：
C = 商品价格
t = 合约交割时间
r = 无风险利率
s = 每单位商品的存储成本
i = 每单位商品的保险成本
因为远期合约的价格可以用下面的公司表示
F=C∗(1+r∗t)+(s∗t)+(i∗t)F = C * (1 + r * t) + (s * t) + (i * t)
F=C∗(1+r∗t)+(s∗t)+(i∗t)
这个公式表明在一般情况下，远期合约的价格会高于现货价格。但是也有例外的情况，就是现货价格高于期货价格，我们称这种情况为现货溢价。比如一家公司急需要玉米生成饲料，如果没有的话公司就会倒闭，这种情况下公司肯定愿意为了马上获得玉米而付出更高的价格。
股票
股票的远期价格会比商品的要复杂一些，因为股票有分红。
用下面的字母表示相关的变量：
S = 股票价格
t = 远期合约的交割时间
r = 合约期间内的利率
di = 合约期间内股票的分红，i 表示第 i 次分红
ti = 每次分红后距离下一次分红的时间
ri = 从每次股息支付到远期合同到期的利率
远期合约的价格可以用下面的公式表示：
F=S∗(1+r∗t)−∑i=1ndi∗(1+ri∗ti)F=S*(1 + r*t)- \sum_{i=1}^{n} d_i*(1 + r_i*t_i)\qquad
F=S∗(1+r∗t)−i=1∑n​di​∗(1+ri​∗ti​)
这个公式其实也很好理解，说到底还是用（现金 + 现金收益 - 持有标的的收益）的思想来求解，只不过多出了分红这几个变量 。
https://mp.weixin.qq.com/s/ROAs29mWG8-6SSy_0WvzjQ

                                        </div>
                                        
                                            <a class="btn btn-text" href="https://lwhile.github.io/post/future-value-defination">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://lwhile.github.io/post/option-binary-tree">
                        期权系列：二叉树定价模型
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2019-06-04</time>
                    
                        <a href="https://lwhile.github.io/tag/qi-quan" class="post-tag i-tag
                            i-tag-success">
            #期权
        </a>
                        
                        <a href="https://lwhile.github.io/tag/jin-rong-jing-ji" class="post-tag i-tag
                            i-tag-primary">
            #金融经济
        </a>
                        
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            最近为了更加深入得学习期权，我把忘了个底朝天的数学重新拿了起来。从高中数学开始，我会一直复习到微积分，一直到我搞懂 BSM 公式中的每一个步骤，以及他们衍生出来的数学知识。套用马克思的话，有百分之五十的利润，人类就会铤而走险；为了百分之一百的利润，人类就敢践踏一切人间法律。而对于 20 多岁的我来说，期权里面包含的无限可能，就能让我无视掉智商被碾压的羞辱感。
废话不多说，下面是推导的步骤（没接触过期权的同学基本可以不用看）
假设某股票 XYZ，其价格目前为 20 元，并且通过一些条件知道，这个股票在三个月将会变为 22 元，或者 18 元。接下来要做的，就是为三个月后，行权价为 21 的 Call Option 定价。由于 Call Option 的性质，当 XYZ 在三个月达到 22 元时，期权的价格为 1 元；若三个月后降为 18，则该 Call Option 作废，价值为 0。
二叉树模型比较简单的地方在于，不像 BSM 模型，我们只需要引入一个假设条件就可以继续往下推算，即「市场没有套利的机会」，因此如果使用股票和 Call Option 的空头来构造一个无风险头寸，则可以得到：
22∂ - 1 = 18∂

解得 ∂=0.25，即在这个头寸中，我们需要买入 0.25 股 XYZ（什么，股票还可以买小数股？没错，还真可以！我们公司就提供了美股碎股交易的 API，需要请联系我），不管三个月后 XYZ 价格是 22 还是 18，只要在这个区间内，这个头寸（0.25 股 XYZ 以及一份看涨期权的空头）的收益都会是 22 * 0.25 - 1 = 4.5
由于该头寸是风险的，所以三个月后 4.5 的收益，就是无风险收益。假设市场的无风险收益是年化 12%，根据复合增长率的公式，假设该头寸当前价值为 µ，则
µ * ℮^(0.12*3/12) = 4.5

解得 µ ~= 4.3670，把它代入下面这个方程：
20 * ∂ - c = µ

∂, µ 这两个变量现在是已知的，因此我们可以知道期权的价格 c 为
20 * ∂ - µ = 20 * 0.25 - 4.3670 = 0.633

没了，整个推导过程就是这样，在该模型下，这个三个月后到期，XYZ 执行价格为 21 的购期权价格就是 0.633，是不是很简单？
后面还有这个过程的通用化公式以及其他扩展，下次继续，最近几天肯定更。
推广
基于上面的推导过程，可以将整个过程通用化。
假设当前 XYZ 的价格为 Sn，其某个期限为 T 的期权的价格为 Fn。在该时间内，XYZ 的价格可能会涨到 Su，期权的价格为 Fu，或者跌倒 Sd，期权的价格为 Fd。
接下来开始构造我们的无风险收益仓位：
同样是 ∂ 单位的股票多头，以及一份 Call Option 的空头，若接下来股票上涨，则整个头寸的价值为：
Su∂ - Fu

若 XZY 下跌，则头寸的价值为：
Sd∂ - Fd

由于该头寸无风险，故：
Su∂ - Fu = Snd∂ - Fd

解得：
∂ = (Fu - Fd)/(Su - Sd)

∂ 在这里即是 XYZ 多头的单位，也可以表示期权的价格变化与股票价格变化的比率。
由于无风险，我们可以求得若 T 时间后股票价格为 Su，则整个头寸的当前价值为：
V = (Su∂ - Fu)/e^(rT)

因此可以得到：
V = Sn∂ - F = (Su∂ - Fu)/e^(rT)

解得：
F = ∂(1 - Su℮^-rT) + Fu℮^-rT

把 ∂ 代入得：
F = Sn∂ - (Su∂ - Fu)/e^(rT)
  = ∂[Sn - Su/e^(rT)] + Fu/e^(rT)

∂ = (Fu - Fd)/(Su - Sd)

👆 这公式即为二叉树模型下期权价格的计算公式，我们把最上面的数字代进去：
Sn = 20
Su = 22
Sd = 18
Fu = 1
Fd = 0
r = 0.12
T = 0.25
∂ = 0.25

得到 F = 0.633，和最开始的例子一样
F = 0.25(20-22/e^(0.12*0.25)) + 1/e^(0.12*0.25) = 0.633

https://mp.weixin.qq.com/s/ROAs29mWG8-6SSy_0WvzjQ
https://mp.weixin.qq.com/s/nTfdb1loEyP0--nMU3n2Qw

                                        </div>
                                        
                                            <a class="btn btn-text" href="https://lwhile.github.io/post/option-binary-tree">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://lwhile.github.io/post/mundell-triangle">
                        货币知识入门：蒙代尔不可能三角
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2018-05-20</time>
                    
                        <a href="https://lwhile.github.io/tag/jin-rong-jing-ji" class="post-tag i-tag
                            i-tag-other_1">
            #金融经济
        </a>
                        
                        <a href="https://lwhile.github.io/tag/huo-bi-xue" class="post-tag i-tag
                            i-tag-primary">
            #货币学
        </a>
                        
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            因为工作的关系，我经常需要在美元和人民币之间做兑换。在这个过程中接触到了一些货币知识。这些货币知识成为一个契机，慢慢得提高了我对这个世界的认知水平。
今天要分享的就是货币体系中一个非常著名的悖论：蒙代尔不可能三角。
这个悖论描述起来很简单，就是固定汇率、 独立货币政策和国际资本自由流动这三个东西, 一个国家或地区最多只能拥有两个, 不能同时拥有 三个。
固定汇率

固定汇率制是以本位货币本身或法定含金量作为确定汇率的基准，各国货币间的汇率基本固定，其波动限制在一定幅度之内的汇率制度。

典型如港币。港币使用的是联系汇率制度，与美元进行挂钩，每 1 美元可以兑换 7.8 左右的港币。这个 1:7.8 的比值并不是固定不变的，而是在一个小范围内波动，这个波动范围目前是 7.75 ～ 7.85。当 1 美元可以兑换到 7.85 港币时（比如这段时间），港币就进入到了弱方阶段。按照供求关系的理论，市场上流动的港币多于美元，物以稀为贵，港币就开始贬值。为了维护联系汇率制度，香港金管局就要向市场投放美元，回收港币。同样的道理，当 1 美元可以兑换 7.75 港币时，香港金管局就要向市场投放港币，回收美元。


固定汇率是反面就是浮动汇率，最典型的就是美国还有日本这些发达国家，政府不控制美元与任何货币的兑换比例，而是让市场由供需关系去动态决定。
固定汇率和浮动汇率没有好坏之分，这只是国家或者地区的操盘手根据现状做出的决定。
独立货币政策
独立货币政策指中央银行可以自己决定本国利率高低，就这么简单。利率是一个很神奇的东西，各国的中央银行可以通过利率影响到社会经济的方方面面。以后有机会再详细说下它。
还是以香港为例子。香港目前的货币政策是无法由香港政府控制的，由于港币与美元挂钩的关系，当美国加息时（下个月美国可能就要再加息一次），香港也得跟着加息。不加息可以吗？当然可以，只不过会有后果。这个后果是什么，后面会有一个例子来说明。
香港的反面就是大陆以及美国。比如人民银行制定人民币利率时不必考虑美元利率是多少。
国际资本自由流动
国际资本自由流动指一个国家的企业和个人可以自由到海外投资, 同时海外资本进入本国时也基本不受限制。
还是以香港为例。我们知道香港被人们称为自由港，只要不是犯法的资本（比如洗钱），都可以在香港自由流动，不受香港政府的管制。从某种程度香港的发展也正是得益于此。
而在大陆，资本是不能够自由流动的。最最最典型的例子，就是每个公民一年只有 5w 美元的额度给你用。用完了，对不起。

蒙代尔不可能三角是怎么产生的
我用一个例子解释这个三角是怎么产生的，这个例子来自于一本书《还原真实的美联储》。
现在有 A 国和 B 国两个国家，假设 A 国不受这个三角的限制，同时拥有了上面这三样东西，将会发生什么情况。
如果 A 国与 B 国的汇率固定在 1 : 1。在独立的政策下，A 国的央行决定将利率定为 5%，而 B 国的利率为 2%。这时候你从 B 国贷款了 100 万 ，到期的时候需要还 102 万。因为资本可以在国际间自由流动，那么只要你将这 100 万转移到 A 国存起来，按照 1:1 的汇率，换成了 100万 A 币，在 5% 的利率下，到期后你可以拿到 105 万 A 币。将这 105 万 A 币转移回 B 国，同理可以换成 105 万 B 币。减掉还给银行的 102 万，整个过程下来你就赚了 3 万 B 币。
这 3 万 B 币从哪里来的？A 国的央行。没错，你撸了 A 国的羊毛。这种行为无异于空手套白狼，几乎是无风险的套利行为，市场一定不会放过这种馅饼。大量的资金就会从 B 国转移进 A 国后再流出，A 国的外汇储备用不了多久就会被耗光。
所以，一个国家和地方绝对不能长久同时拥有固定汇率、自由资本流动和独立货币政策, 否则最后必然会以金融危机的方式 结束。

在固定汇率、独立货币政策和国际资本自由流动中三选二, 那么有三种不同的情况。这三种情况在现实中都可以找到例证。美国选择了独立货币政策和自由 资本流动, 因此必须放弃固定汇率。目前美元采用的是浮动汇率制, 不与任何货币或者贵重金属挂钩。中国选择了固定 汇率：人民币基本和美元挂钩。同时人民 银行有独立制定人民币利率的权力, 因此必须放弃自由资本流动。


                                        </div>
                                        
                                            <a class="btn btn-text" href="https://lwhile.github.io/post/mundell-triangle">Read More ~</a>
                            </div>
                </div>
            </article>
            
                <!-- 翻页 -->
                
                </div>
                <!--  -->
                <div class="main-container-middle"></div>
                <!--  -->
                <div id="sidebar" class="main-container-right">

                    <!-- 个人信息 -->
                    
    <div class="id_card i-card">
        <div class="id_card-avatar" style="background-image: url(https://lwhile.github.io/images/avatar.png?v=1576341339502)">
        </div>
        <h1 class="id_card-title">
            神蛋杂谈
        </h1>
        <h2 class="id_card-description">
            
        </h2>
        <!--  -->
        <div class="id_card-sns">
            <!-- github -->
            
                    <!-- twitter -->
                    
                            <!-- weibo -->
                            
                                    <!-- facebook -->
                                    

        </div>
    </div>
    

                        <!-- 公告栏 -->
                        

                </div>
            </div>



            <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | 
  <a class="rss" href="https://lwhile.github.io/atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>

    </div>
    <script>
        $('#sidebar').stickySidebar({
            topSpacing: 80,
            // bottomSpacing: 60
        });
    </script>
</body>

</html>